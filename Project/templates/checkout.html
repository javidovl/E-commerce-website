{% extends "base.html" %}
{% load static %}

	{% block content %}        <!-- header section start -->
		
        <!-- header section end -->
        <!-- pages-title-start -->
		<div class="pages-title section-padding">
			<div class="container">
				<div class="row">
					<div class="col-xs-12">
						<div class="pages-title-text text-center">
							<h2>Chcekout</h2>
							<ul class="text-left">
								<li><a href="{% url 'index' %}">Home </a></li>
								<li><span> // </span>Chcekout</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- pages-title-end -->
		<!-- Checkout content section start -->
		<section class="pages checkout section-padding">
			<div class="container">
				<div class="row">
					<div class="col-sm-6">
						<div class="main-input single-cart-form padding60">
							<div class="log-title">
								<h3><strong>billing details</strong></h3>
							</div>
							<div class="custom-input">
								<h6>Please, select the address for your order</h6>
								<!-- <form action="mail.php" method="post">

									<input type="text" name="subject" placeholder="Your name" />
									<input type="text" name="subject" placeholder="Enter your here" />
									<input type="text" name="subject" placeholder="Phone here" />
									<input type="text" name="subject" placeholder="Company name here..." />
									<div class="custom-select">
										<select class="form-control">
											<option> Country</option>
											<option> Bangladesh </option>
											<option> United States </option>
											<option> United Kingdom </option>
											<option> Canada </option>
											<option> Malaysia </option>
											<option> United Arab Emirates </option>
										</select>
									</div>
									<div class="custom-select">
										<select class="form-control">
											<option> State</option>
											<option> Aberdeen </option>
											<option> Bedfordshire </option>
											<option> Caerphilly </option>
											<option> Denbighshire </option>
											<option> East Ayrshire </option>
											<option> Falkirk </option>
										</select>
									</div>
									<div class="custom-select">
										<select class="form-control">
											<option> Town / City</option>
											<option> Aberdeen </option>
											<option> Bedfordshire </option>
											<option> Caerphilly </option>
											<option> Denbighshire </option>
											<option> East Ayrshire </option>
											<option> Falkirk </option>
										</select>
									</div>
									<div class="custom-mess">
										<textarea rows="2" placeholder="Your address here" name="message"></textarea>
									</div>
								</form> -->
								<select name="" id="data-address-id" style="outline: none; border: none;">
									{% for address in request.user.billing_address_of_user.all %}
									<option value="{{address.id}}">{{address.billing_address_first_name}} {{address.billing_address_last_name}}, {{address.billing_address_mobile_phone}}, {{address.billing_address_country.name}},  {{address.billing_address_address}}</option>
									{% endfor %}
								</select>
							</div>
						</div>
					</div>
					<div class="col-sm-6">
						<div class="main-input single-cart-form padding60">
							<div class="log-title">
								<h3><strong>ship to different address</strong></h3>
							</div>
							<!-- <div class="custom-input">
								<form action="mail.php" method="post">
									<input type="text" name="subject" placeholder="Your name" />
									<input type="text" name="subject" placeholder="Enter your here" />
									<input type="text" name="subject" placeholder="Phone here" />
									<input type="text" name="subject" placeholder="Company name here..." />
									<div class="custom-select">
										<select class="form-control">
											<option> Country</option>
											<option> Bangladesh </option>
											<option> United States </option>
											<option> United Kingdom </option>
											<option> Canada </option>
											<option> Malaysia </option>
											<option> United Arab Emirates </option>
										</select>
									</div>
									<div class="custom-select">
										<select class="form-control">
											<option> State</option>
											<option> Aberdeen </option>
											<option> Bedfordshire </option>
											<option> Caerphilly </option>
											<option> Denbighshire </option>
											<option> East Ayrshire </option>
											<option> Falkirk </option>
										</select>
									</div>
									<div class="custom-select">
										<select class="form-control">
											<option> Town / City</option>
											<option> Aberdeen </option>
											<option> Bedfordshire </option>
											<option> Caerphilly </option>
											<option> Denbighshire </option>
											<option> East Ayrshire </option>
											<option> Falkirk </option>
										</select>
									</div>
									<div class="custom-mess">
										<textarea rows="2" placeholder="Order notes here..." name="message"></textarea>
									</div>
								</form>
							</div> -->
							<a href="{% url 'my-account' %}" style="background: #333 none repeat scroll 0 0;
							border: 0 none;
							color: #fff;
							display: inline-block;
							line-height: 35px;
							padding: 0 30px;
							text-transform: uppercase;
							transition: all 0.3s ease 0s;">Add new address</a>
						</div>
					</div>
				</div>
				<div class="row margin-top">
					<div class="col-xs-12 col-sm-6">
						<div class="padding60">
							<div class="log-title">
								<h3><strong>Your order</strong></h3>
							</div>
							<div class="cart-form-text pay-details table-responsive">
								<table>
									<thead>
										<tr>
											<th>Product</th>
											<td>Total</td>
										</tr>
									</thead>
									<tbody>
										{% for basket_item in basket.product_list.all %}
										<tr>
											<th basket_item_id="{{basket_item.id}}">{{basket_item.product_version.product.name}}  x {{basket_item.quantity}}</th>
											<td>${{basket_item.price_of_basket_item}}</td>
										</tr>
										{% endfor %}
										<select name="" id="#data-basket-id" hidden="True">
											<option value="{{basket.id}}">{{basket.id}}</option>
										</select>
										<!-- <tr>
											<th>Menâ€™s Black Shirt  x 1</th>
											<td>$69.00</td>
										</tr>
										<tr>
											<th>Cart Subtotal</th>
											<td>$155.00</td>
										</tr>
										<tr>
											<th>Shipping and Handing</th>
											<td>$15.00</td>
										</tr>
										<tr>
											<th>Vat</th>
											<td>$00.00</td>
										</tr> -->
									</tbody>
									<tfoot>
										<tr>
											<th>Order total</th>
											<td>${{basket.total_price}}</td>
										</tr>
									</tfoot>
								</table>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6">
						<div class="padding60">
							<div class="log-title">
								<h3><strong>Payment method</strong></h3>
							</div>
							<div class="categories">
								<ul id="accordion" class="panel-group clearfix">
									<!-- <li class="panel">
										<div data-toggle="collapse" data-parent="#accordion" data-target="#collapse1">
											<div class="medium-a">
												direct bank transfer
											</div>
										</div>
										<div class="panel-collapse collapse in" id="collapse1">
											<div class="normal-a">
												<p>Lorem Ipsum is simply in dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry.</p>
											</div>
										</div>
									</li> -->
									<!-- <li class="panel"> -->
										<!-- <div data-toggle="collapse" data-parent="#accordion" data-target="#collapse2">
											<div class="medium-a">
												cheque payment
											</div>
										</div> -->
										<!-- <div class="paypal-dsc panel-collapse collapse" id="collapse2">
											<div class="normal-a">
												<p>Lorem Ipsum is simply in dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry.</p>
											</div>
										</div> -->
									<!-- </li> -->
									<li class="panel">
										<div data-toggle="collapse" data-parent="#accordion" data-target="#collapse3">
											<div class="medium-a">
												paypal
											</div>
										</div>
										<div class="paypal-dsc panel-collapse collapse" id="collapse3">
											<div class="normal-a">
												<p><div id="paypal-button-container">Place order</div></p>
											</div>
										</div>
									</li>
								</ul>
								<div class="submit-text">
									<a  user={{request.user.id}} id="complete-order-button">Complete order</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- Checkout content section end -->

		<script src="https://www.paypal.com/sdk/js?client-id=AR41qYTr2120NPDxYkvaBwppW8OkT4ZQ79xwC9yoE93pCtlj5Dx_Kqu4D-p6FUTmMawMro3jB187B6YJ&currency=USD"></script>

    <script>
        // Render the PayPal button into #paypal-button-container
        paypal.Buttons({

            // Set up the transaction
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value : '82'
                        }
                    }]
                });
            },

            // Finalize the transaction
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(orderData) {
                    // Successful capture! For demo purposes:
                    console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
                    var transaction = orderData.purchase_units[0].payments.captures[0];
                    alert('Transaction '+ transaction.status + ': ' + transaction.id + '\n\nSee console for all available details');

                    // Replace the above to show a success message within this page, e.g.
                    // const element = document.getElementById('paypal-button-container');
                    // element.innerHTML = '';
                    // element.innerHTML = '<h3>Thank you for your payment!</h3>';
                    // Or go to another URL:  actions.redirect('thank_you.html');
                });
            }


        }).render('#paypal-button-container');
    </script>
{% endblock content %}